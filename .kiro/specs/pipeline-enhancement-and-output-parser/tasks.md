# Implementation Plan

## æµ‹è¯•ç­–ç•¥è¯´æ˜

æœ¬é¡¹ç›®é‡‡ç”¨åˆ†å±‚æµ‹è¯•ç­–ç•¥ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œç”Ÿäº§ç¯å¢ƒå¯é æ€§ï¼š

1. **å•å…ƒæµ‹è¯•ï¼ˆUnit Testsï¼‰**ï¼šæµ‹è¯•ç‹¬ç«‹ç»„ä»¶çš„é€»è¾‘å’ŒåŠŸèƒ½ï¼Œä¸æ¶‰åŠå¤–éƒ¨ä¾èµ–ï¼ˆå¦‚ LLM API è°ƒç”¨ï¼‰
   - ä¾‹å¦‚ï¼šé…ç½®éªŒè¯ã€æ•°æ®æ¨¡å‹ã€è§£æå™¨å·¥å‚ç±»ã€é”™è¯¯å¤„ç†é€»è¾‘ç­‰
   - è¿™äº›æµ‹è¯•å¿«é€Ÿã€å¯é‡å¤ã€ä¸æ¶ˆè€— API é…é¢

2. **é›†æˆæµ‹è¯•ï¼ˆIntegration Testsï¼‰**ï¼šæµ‹è¯•ç»„ä»¶é—´çš„é›†æˆå’ŒçœŸå® LLM è°ƒç”¨
   - **å¿…é¡»ä½¿ç”¨çœŸå®çš„ doubao-1-5-pro-32k-250115 æ¨¡å‹**
   - éªŒè¯ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„å®é™…è¡¨ç°
   - æµ‹è¯• Output Parser ä¸çœŸå®æ¨¡å‹è¾“å‡ºçš„é›†æˆ
   - éªŒè¯æ¨¡å‹å“åº”è´¨é‡å’Œæ ¼å¼
   - è¿™äº›æµ‹è¯•åœ¨ä»»åŠ¡ 9.x ä¸­æ‰§è¡Œ

3. **å‘åå…¼å®¹æ€§æµ‹è¯•**ï¼šç¡®ä¿æ–°åŠŸèƒ½ä¸ç ´åç°æœ‰å·¥ä½œæµ
   - éªŒè¯æœªé…ç½® Output Parser çš„æ—§ Flow ç»§ç»­æ­£å¸¸å·¥ä½œ
   - æµ‹è¯•ç°æœ‰ API å’Œ CLI æ¥å£ä¿æŒä¸å˜

---

- [x] 1. Output Parser åŸºç¡€è®¾æ–½
  - åˆ›å»º Output Parser çš„æ ¸å¿ƒç»„ä»¶ï¼Œæ”¯æŒ JSONã€Pydantic ç­‰å¤šç§è§£æå™¨ç±»å‹
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 1.1 åˆ›å»º Output Parser æ•°æ®æ¨¡å‹
  - åœ¨ `src/models.py` ä¸­æ·»åŠ  `OutputParserConfig` dataclass
  - å®šä¹‰å­—æ®µï¼štype, schema, pydantic_model, retry_on_error, max_retries, fix_prompt
  - å®ç° validate() æ–¹æ³•éªŒè¯é…ç½®æœ‰æ•ˆæ€§
  - _Requirements: 4.1, 5.1_

- [x] 1.2 å®ç° Output Parser å·¥å‚ç±»
  - åˆ›å»º `src/output_parser.py` æ–‡ä»¶
  - å®ç° `OutputParserFactory` ç±»
  - å®ç° `create_parser()` æ–¹æ³•æ”¯æŒ json, pydantic, list, none ç±»å‹
  - å®ç° `create_retry_parser()` æ–¹æ³•åŒ…è£…é‡è¯•é€»è¾‘
  - ä½¿ç”¨ LangChain çš„ JsonOutputParser, PydanticOutputParser, OutputFixingParser
  - _Requirements: 4.1, 4.4_

- [x] 1.3 å¢å¼º chains.py æ”¯æŒ Output Parser
  - ä¿®æ”¹ `build_chain()` å‡½æ•°æ£€æŸ¥ flow_cfg ä¸­çš„ output_parser é…ç½®
  - å¦‚æœé…ç½®äº† parserï¼Œæ„å»º `prompt | llm | parser` chain
  - å¦‚æœæœªé…ç½®ï¼Œä¿æŒåŸæœ‰è¡Œä¸º `prompt | llm`ï¼ˆå‘åå…¼å®¹ï¼‰
  - ä¿®æ”¹ `run_flow()` å’Œ `run_flow_with_tokens()` è¿”å›è§£æåçš„ç»“æœ
  - _Requirements: 4.5, 5.5, 14.1_

- [x] 1.4 å•å…ƒæµ‹è¯• Output Parser åŸºç¡€åŠŸèƒ½
  - åˆ›å»º `tests/test_output_parser.py`
  - æµ‹è¯• OutputParserFactory åˆ›å»ºå„ç§ç±»å‹çš„ parser
  - æµ‹è¯• JSON parser è§£ææˆåŠŸåœºæ™¯
  - æµ‹è¯• JSON parser è§£æå¤±è´¥å’Œé‡è¯•
  - æµ‹è¯• Pydantic parser éªŒè¯æˆåŠŸå’Œå¤±è´¥
  - æµ‹è¯•å‘åå…¼å®¹æ€§ï¼ˆæœªé…ç½® parser è¿”å›å­—ç¬¦ä¸²ï¼‰
  - **æ³¨æ„**ï¼šè¿™äº›æ˜¯çº¯å•å…ƒæµ‹è¯•ï¼Œæµ‹è¯• parser åŸºç¡€è®¾æ–½æœ¬èº«ï¼ˆé…ç½®ã€éªŒè¯ã€è§£æé€»è¾‘ï¼‰ï¼Œä¸æ¶‰åŠ LLM è°ƒç”¨
  - **çœŸå® LLM é›†æˆæµ‹è¯•**åœ¨ä»»åŠ¡ 9.1-9.4 ä¸­è¿›è¡Œï¼Œä½¿ç”¨ doubao-1-5-pro-32k-250115 æ¨¡å‹
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 14.1, 15.1_

- [x] 2. æ›´æ–° Judge Agent ä½¿ç”¨ Output Parser
  - ä¸º Judge Agent é…ç½® JSON Output Parserï¼Œæå‡è¯„ä¼°å¯é æ€§
  - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 2.1 ä¸º Judge Flow æ·»åŠ  output_parser é…ç½®
  - ç¼–è¾‘ `agents/judge_default/prompts/judge_v1.yaml`
  - ç¼–è¾‘ `agents/judge_default/prompts/judge_v2.yaml`
  - æ·»åŠ  output_parser èŠ‚ï¼Œé…ç½® type: "json"
  - å®šä¹‰ JSON schemaï¼ˆoverall_score, must_have_check, nice_to_have_check, overall_commentï¼‰
  - é…ç½® retry_on_error: true, max_retries: 3
  - _Requirements: 6.1, 6.4_

- [x] 2.2 å®ç° Judge è¾“å‡ºé™çº§å¤„ç†
  - åœ¨ `src/eval_llm_judge.py` ä¸­æ·»åŠ é™çº§å¤„ç†é€»è¾‘
  - å½“è§£æå¤±è´¥ä¸”é‡è¯•è€—å°½æ—¶ï¼Œè¿”å›é»˜è®¤åˆ†æ•°ï¼ˆ5.0ï¼‰å’Œé”™è¯¯ä¿¡æ¯
  - è®°å½•è§£æå¤±è´¥çš„è¯¦ç»†æ—¥å¿—
  - _Requirements: 6.3_

- [x] 2.3 å¢å¼º Judge é”™è¯¯ä¿¡æ¯
  - å½“å­—æ®µç¼ºå¤±æ—¶ï¼Œæä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
  - æŒ‡å‡ºç¼ºå¤±çš„å­—æ®µåç§°å’ŒæœŸæœ›çš„ç±»å‹
  - æä¾›ä¿®å¤å»ºè®®ï¼ˆæ£€æŸ¥ prompt, æŸ¥çœ‹ LLM åŸå§‹è¾“å‡ºï¼‰
  - _Requirements: 6.5_

- [x] 2.4 å•å…ƒæµ‹è¯• Judge Output Parser
  - åˆ›å»º `tests/test_judge_output_parser.py`
  - æµ‹è¯• Judge è¾“å‡ºæˆåŠŸè§£æ
  - æµ‹è¯•å¿…éœ€å­—æ®µéªŒè¯
  - æµ‹è¯•è§£æå¤±è´¥å’Œé‡è¯•
  - æµ‹è¯•é™çº§å¤„ç†
  - _Requirements: 6.1, 6.2, 6.3, 6.4_

- [x] 3. åˆ›å»º Pipeline ç¤ºä¾‹é…ç½®
  - æä¾›å®Œæ•´çš„ Pipeline ç¤ºä¾‹ï¼Œé™ä½å­¦ä¹ æ›²çº¿
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 3.1 åˆ›å»ºç®€å• Pipeline ç¤ºä¾‹ï¼ˆæ–‡æ¡£å¤„ç†ï¼‰
  - åˆ›å»º `pipelines/document_summary.yaml`
  - å®šä¹‰ 2 ä¸ªæ­¥éª¤ï¼šcleanï¼ˆæ¸…æ´—ï¼‰â†’ summarizeï¼ˆæ€»ç»“ï¼‰
  - é…ç½® inputs, outputs, baseline, variants
  - åˆ›å»ºæµ‹è¯•é›† `data/pipelines/document_summary/testsets/documents.jsonl`ï¼ˆè‡³å°‘ 5 ä¸ªç”¨ä¾‹ï¼‰
  - _Requirements: 1.2, 1.5_

- [x] 3.2 åˆ›å»ºå¤æ‚ Pipeline ç¤ºä¾‹ï¼ˆå®¢æœæµç¨‹ï¼‰
  - åˆ›å»º `pipelines/customer_service_flow.yaml`
  - å®šä¹‰ 3 ä¸ªæ­¥éª¤ï¼šintent_detection â†’ entity_extraction â†’ response_generation
  - é…ç½® inputs, outputs, baseline, variants
  - åˆ›å»ºæµ‹è¯•é›† `data/pipelines/customer_service_flow/testsets/customer_requests.jsonl`ï¼ˆè‡³å°‘ 5 ä¸ªç”¨ä¾‹ï¼‰
  - _Requirements: 1.3, 1.5_

- [x] 3.3 åˆ›å»ºæˆ–å¤ç”¨ç¤ºä¾‹æ‰€éœ€çš„ Agent
  - æ£€æŸ¥ç¤ºä¾‹ Pipeline å¼•ç”¨çš„ Agent æ˜¯å¦å­˜åœ¨
  - å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºç®€åŒ–ç‰ˆæœ¬çš„ Agentï¼ˆtext_cleaner, summarizer, intent_classifier, entity_extractor, response_generatorï¼‰
  - æˆ–è€…ä¿®æ”¹ç¤ºä¾‹ä½¿ç”¨ç°æœ‰çš„ Agentï¼ˆå¦‚ mem0_l1_summarizerï¼‰
  - ç¡®ä¿æ‰€æœ‰å¼•ç”¨çš„ Flow éƒ½å­˜åœ¨
  - _Requirements: 1.4_

- [x] 3.4 é›†æˆæµ‹è¯• Pipeline ç¤ºä¾‹å¯æ‰§è¡Œæ€§
  - åˆ›å»º `tests/test_pipeline_examples.py`
  - æµ‹è¯• document_summary Pipeline èƒ½å¤ŸæˆåŠŸåŠ è½½
  - æµ‹è¯• customer_service_flow Pipeline èƒ½å¤ŸæˆåŠŸåŠ è½½
  - æµ‹è¯•ç¤ºä¾‹ Pipeline èƒ½å¤ŸæˆåŠŸæ‰§è¡Œï¼ˆä½¿ç”¨çœŸå® LLM è°ƒç”¨ï¼‰
  - éªŒè¯è¾“å‡ºæ ¼å¼å’Œå†…å®¹
  - _Requirements: 1.1, 1.2, 1.3, 16.3_

- [x] 4. æ›´æ–°æ–‡æ¡£å’Œæ¼”ç¤ºè„šæœ¬
  - å®Œå–„ Pipeline ç›¸å…³æ–‡æ¡£ï¼Œæä¾›å¿«é€Ÿå¼€å§‹æŒ‡å—
  - _Requirements: 2.1, 2.2, 2.3, 13.1, 13.2_

- [x] 4.1 æ›´æ–° README.md å¿«é€Ÿå¼€å§‹ç« èŠ‚
  - åœ¨"å¿«é€Ÿå¼€å§‹"ç« èŠ‚æ·»åŠ  Pipeline è¿è¡Œç¤ºä¾‹
  - æä¾›å®Œæ•´çš„å‘½ä»¤è¡Œç¤ºä¾‹å’Œé¢„æœŸè¾“å‡º
  - æ·»åŠ  Pipeline åˆ›å»ºæ­¥éª¤
  - _Requirements: 2.1, 13.1_

- [x] 4.2 æ›´æ–° Pipeline é…ç½®æŒ‡å—
  - ç¼–è¾‘ `docs/reference/pipeline-guide.md`
  - æ·»åŠ  Output Parser é…ç½®è¯´æ˜
  - æ·»åŠ è¯„ä¼°é…ç½®è¯´æ˜
  - æ·»åŠ æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜
  - _Requirements: 2.2, 13.2_

- [x] 4.3 åˆ›å»º Pipeline æ¼”ç¤ºè„šæœ¬
  - åˆ›å»º `examples/pipeline_demo.py`
  - æ¼”ç¤ºå¦‚ä½•åŠ è½½ Pipeline é…ç½®
  - æ¼”ç¤ºå¦‚ä½•æ‰§è¡Œ Pipeline
  - æ¼”ç¤ºå¦‚ä½•è¯„ä¼° Pipeline
  - æ¼”ç¤ºå¦‚ä½•å¯¹æ¯”å˜ä½“
  - æ·»åŠ è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜
  - _Requirements: 2.3_

- [x] 5. å®ç°ç»Ÿä¸€è¯„ä¼°æ¥å£
  - ç»Ÿä¸€ Agent å’Œ Pipeline çš„è¯„ä¼°æ–¹å¼ï¼Œæå‡ä¸€è‡´æ€§
  - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5_

- [x] 5.1 åˆ›å»ºç»Ÿä¸€è¯„ä¼°é…ç½®
  - åœ¨ `src/models.py` ä¸­æ·»åŠ  `EvaluationConfig` dataclass
  - å®šä¹‰å­—æ®µï¼šrules, judge_enabled, judge_agent_id, judge_flow, scale_min, scale_max, case_fields
  - å®ç° `from_agent_config()` ç±»æ–¹æ³•
  - å®ç° `from_pipeline_config()` ç±»æ–¹æ³•
  - _Requirements: 7.1_

- [x] 5.2 å®ç°ç»Ÿä¸€è¯„ä¼°å™¨
  - åˆ›å»º `src/unified_evaluator.py` æ–‡ä»¶
  - å®ç° `UnifiedEvaluator` ç±»
  - å®ç° `evaluate_agent_output()` æ–¹æ³•
  - å®ç° `evaluate_pipeline_output()` æ–¹æ³•
  - ç¡®ä¿ä¸¤ç§è¯„ä¼°ä½¿ç”¨ç›¸åŒçš„è§„åˆ™å¼•æ“å’Œ Judge
  - _Requirements: 7.2, 7.3_

- [x] 5.3 æ›´æ–°è¯„ä¼°ç»“æœæ ¼å¼
  - åœ¨ `src/models.py` ä¸­æ›´æ–° `EvaluationResult` dataclass
  - æ·»åŠ  entity_type å­—æ®µï¼ˆ"agent" | "pipeline"ï¼‰
  - æ·»åŠ  entity_id å­—æ®µ
  - æ·»åŠ  step_outputs å­—æ®µï¼ˆPipeline ä¸“ç”¨ï¼‰
  - ç¡®ä¿ Agent å’Œ Pipeline ä½¿ç”¨ç›¸åŒçš„ç»“æœæ ¼å¼
  - _Requirements: 7.4_

- [x] 5.4 é‡æ„ç°æœ‰è¯„ä¼°ä»£ç ä½¿ç”¨ç»Ÿä¸€æ¥å£
  - é‡æ„ `src/eval_llm_judge.py` ä½¿ç”¨ UnifiedEvaluator
  - é‡æ„ `src/pipeline_eval.py` ä½¿ç”¨ UnifiedEvaluator
  - ç¡®ä¿å‘åå…¼å®¹ï¼ˆæ—§çš„å‡½æ•°ç­¾åç»§ç»­å·¥ä½œï¼‰
  - _Requirements: 14.2_

- [x] 5.5 å•å…ƒæµ‹è¯•ç»Ÿä¸€è¯„ä¼°æ¥å£
  - åˆ›å»º `tests/test_unified_evaluator.py`
  - æµ‹è¯• EvaluationConfig ä» Agent é…ç½®åˆ›å»º
  - æµ‹è¯• EvaluationConfig ä» Pipeline é…ç½®åˆ›å»º
  - æµ‹è¯• UnifiedEvaluator çš„ Agent è¯„ä¼°
  - æµ‹è¯• UnifiedEvaluator çš„ Pipeline è¯„ä¼°
  - æµ‹è¯•è¯„ä¼°ç»“æœæ ¼å¼ä¸€è‡´æ€§
  - _Requirements: 7.1, 7.2, 7.3, 7.4_

- [x] 6. å®ç° Pipeline è¯„ä¼°ç‰¹æ®Šå¤„ç†
  - å¤„ç† Pipeline å¤šæ­¥éª¤è¾“å‡ºçš„è¯„ä¼°éœ€æ±‚
  - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5_

- [x] 6.1 å®ç° Pipeline æ­¥éª¤è¾“å‡ºæ”¶é›†
  - åœ¨ `src/pipeline_runner.py` ä¸­æ”¶é›†æ‰€æœ‰æ­¥éª¤çš„è¾“å‡º
  - å°†æ­¥éª¤è¾“å‡ºå­˜å‚¨åœ¨ PipelineResult ä¸­
  - è®°å½•æ¯ä¸ªæ­¥éª¤çš„æ‰§è¡ŒçŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
  - _Requirements: 8.1, 8.4_

- [x] 6.2 æ”¯æŒæŒ‡å®šè¯„ä¼°ç›®æ ‡æ­¥éª¤
  - åœ¨ Pipeline é…ç½®ä¸­æ·»åŠ  evaluation_target å­—æ®µï¼ˆé»˜è®¤æœ€åä¸€æ­¥ï¼‰
  - åœ¨è¯„ä¼°æ—¶ä½¿ç”¨æŒ‡å®šæ­¥éª¤çš„è¾“å‡º
  - _Requirements: 8.2_

- [x] 6.3 å°†ä¸­é—´æ­¥éª¤è¾“å‡ºä¼ é€’ç»™ Judge
  - åœ¨è°ƒç”¨ Judge æ—¶ï¼Œå°†æ‰€æœ‰æ­¥éª¤è¾“å‡ºä½œä¸ºä¸Šä¸‹æ–‡
  - æ›´æ–° Judge prompt æ¨¡æ¿æ”¯æŒæ¥æ”¶æ­¥éª¤è¾“å‡º
  - _Requirements: 8.3_

- [x] 6.4 å®ç°æ­¥éª¤å¤±è´¥å¤„ç†
  - å½“æ­¥éª¤å¤±è´¥æ—¶ï¼Œè®°å½•å¤±è´¥åŸå› 
  - è·³è¿‡åç»­ä¾èµ–è¯¥æ­¥éª¤çš„æ­¥éª¤
  - åœ¨è¯„ä¼°ç»“æœä¸­æ ‡è®°å¤±è´¥æ­¥éª¤
  - _Requirements: 8.5_

- [x] 6.5 å•å…ƒæµ‹è¯• Pipeline è¯„ä¼°
  - åˆ›å»º `tests/test_pipeline_evaluation.py`
  - æµ‹è¯•æ­¥éª¤è¾“å‡ºæ”¶é›†
  - æµ‹è¯•æŒ‡å®šè¯„ä¼°ç›®æ ‡æ­¥éª¤
  - æµ‹è¯•ä¸­é—´è¾“å‡ºä¼ é€’ç»™ Judge
  - æµ‹è¯•æ­¥éª¤å¤±è´¥å¤„ç†
  - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5_

- [x] 7. å®ç°é…ç½®éªŒè¯å’Œé”™è¯¯æç¤º
  - æä¾›æ¸…æ™°çš„é…ç½®éªŒè¯å’Œé”™è¯¯ä¿¡æ¯
  - _Requirements: 11.1, 11.2, 11.3, 11.4, 11.5_

- [x] 7.1 å¢å¼ºé…ç½®éªŒè¯
  - åœ¨ `src/pipeline_config.py` ä¸­å¢å¼º validate_yaml_schema()
  - éªŒè¯ output_parser é…ç½®çš„æœ‰æ•ˆæ€§
  - éªŒè¯ JSON schema æ ¼å¼
  - æ£€æµ‹ Pipeline æ­¥éª¤çš„å¾ªç¯ä¾èµ–
  - _Requirements: 11.1, 11.3, 11.4_

- [x] 7.2 æ”¹è¿›é”™è¯¯ä¿¡æ¯
  - å½“å¼•ç”¨ä¸å­˜åœ¨çš„ Agent/Flow æ—¶ï¼Œåˆ—å‡ºå¯ç”¨é€‰é¡¹
  - å½“é…ç½®æ ¼å¼é”™è¯¯æ—¶ï¼ŒæŒ‡å‡ºå…·ä½“ä½ç½®å’ŒåŸå› 
  - æä¾›ä¿®å¤å»ºè®®
  - _Requirements: 11.2, 11.5_

- [x] 7.3 å•å…ƒæµ‹è¯•é…ç½®éªŒè¯
  - åˆ›å»º `tests/test_config_validation.py`
  - æµ‹è¯•å„ç§æ— æ•ˆé…ç½®è¢«æ­£ç¡®æ£€æµ‹
  - æµ‹è¯•å¾ªç¯ä¾èµ–æ£€æµ‹
  - æµ‹è¯•é”™è¯¯ä¿¡æ¯çš„å®Œæ•´æ€§
  - _Requirements: 11.1, 11.2, 11.3, 11.4, 11.5_

- [x] 8. å®ç°æ€§èƒ½ç›‘æ§
  - æ·»åŠ æ€§èƒ½ç›‘æ§å’Œç»Ÿè®¡åŠŸèƒ½
  - _Requirements: 12.1, 12.2, 12.3, 12.4, 12.5_

- [x] 8.1 æ·»åŠ æ‰§è¡Œæ—¶é—´è®°å½•
  - åœ¨ Pipeline æ‰§è¡Œä¸­è®°å½•æ¯ä¸ªæ­¥éª¤çš„å¼€å§‹å’Œç»“æŸæ—¶é—´
  - è®¡ç®—æ¯ä¸ªæ­¥éª¤çš„æ‰§è¡Œæ—¶é—´
  - è®¡ç®—æ€»æ‰§è¡Œæ—¶é—´
  - _Requirements: 12.1_

- [x] 8.2 æ·»åŠ  Output Parser ç»Ÿè®¡
  - è®°å½•è§£ææˆåŠŸæ¬¡æ•°å’Œå¤±è´¥æ¬¡æ•°
  - è®°å½•é‡è¯•æ¬¡æ•°
  - è®¡ç®—è§£ææˆåŠŸç‡
  - _Requirements: 12.2_

- [x] 8.3 æ·»åŠ  token ä½¿ç”¨é‡ç»Ÿè®¡
  - åœ¨ `run_flow_with_tokens()` ä¸­è®°å½• token ä½¿ç”¨é‡
  - ç´¯è®¡æ‰€æœ‰æ­¥éª¤çš„ token ä½¿ç”¨é‡
  - åŒºåˆ†è¾“å…¥ token å’Œè¾“å‡º token
  - _Requirements: 12.3_

- [x] 8.4 ç”Ÿæˆæ€§èƒ½æ‘˜è¦
  - åœ¨æ‰§è¡Œå®Œæˆåç”Ÿæˆæ€§èƒ½æ‘˜è¦
  - åŒ…å«æ€»æ—¶é—´ã€token æ¶ˆè€—ã€æˆåŠŸç‡
  - åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¾“å‡ºè¯¦ç»†ä¿¡æ¯
  - _Requirements: 12.4, 12.5_

- [x] 8.5 å•å…ƒæµ‹è¯•æ€§èƒ½ç›‘æ§
  - åˆ›å»º `tests/test_performance_monitoring.py`
  - æµ‹è¯•æ‰§è¡Œæ—¶é—´è®°å½•
  - æµ‹è¯• token ç»Ÿè®¡
  - æµ‹è¯•æ€§èƒ½æ‘˜è¦ç”Ÿæˆ
  - _Requirements: 12.1, 12.2, 12.3, 12.4_

- [x] 9. é›†æˆæµ‹è¯•ï¼ˆçœŸå® LLM è°ƒç”¨ - doubao-1-5-pro-32k-250115ï¼‰
  - **é‡è¦**ï¼šæ‰€æœ‰é›†æˆæµ‹è¯•å¿…é¡»ä½¿ç”¨çœŸå®çš„ doubao-1-5-pro-32k-250115 æ¨¡å‹è¿›è¡Œè°ƒç”¨
  - ä½¿ç”¨ .env ä¸­é…ç½®çš„çœŸå® API Key å’Œæ¨¡å‹
  - ç¦æ­¢ä½¿ç”¨ Mock æˆ–å‡æ•°æ®ï¼Œå¿…é¡»éªŒè¯çœŸå®æ¨¡å‹çš„å“åº”
  - _Requirements: 16.1, 16.2, 16.3, 16.4, 16.5, 16.6, 16.7, 16.8_

- [x] 9.1 æµ‹è¯• Judge Agent ä½¿ç”¨ Output Parserï¼ˆçœŸå®æ¨¡å‹è°ƒç”¨ï¼‰
  - åˆ›å»º `tests/test_integration_judge.py`
  - ä½¿ç”¨ .env ä¸­çš„çœŸå® API Key å’Œ doubao-1-5-pro-32k-250115 æ¨¡å‹
  - çœŸå®è°ƒç”¨ Judge Agentï¼ŒéªŒè¯ Output Parser æ­£ç¡®è§£ææ¨¡å‹è¾“å‡º
  - éªŒè¯è¿”å›çš„æ˜¯ç»“æ„åŒ–å¯¹è±¡ï¼ˆdict/Pydantic å¯¹è±¡ï¼‰
  - éªŒè¯å¿…éœ€å­—æ®µå­˜åœ¨ï¼ˆoverall_score, must_have_check, overall_commentï¼‰
  - éªŒè¯æ¨¡å‹å“åº”è´¨é‡å’Œæ ¼å¼ç¬¦åˆé¢„æœŸ
  - _Requirements: 16.1, 16.2, 16.4, 16.5, 16.8_

- [x] 9.2 æµ‹è¯• Pipeline å®Œæ•´æ‰§è¡Œï¼ˆçœŸå®æ¨¡å‹è°ƒç”¨ï¼‰
  - åˆ›å»º `tests/test_integration_pipeline.py`
  - ä½¿ç”¨ doubao-1-5-pro-32k-250115 æ¨¡å‹çœŸå®æ‰§è¡Œ document_summary Pipeline
  - ä½¿ç”¨ doubao-1-5-pro-32k-250115 æ¨¡å‹çœŸå®æ‰§è¡Œ customer_service_flow Pipeline
  - éªŒè¯æ‰€æœ‰æ­¥éª¤æˆåŠŸæ‰§è¡Œï¼Œæ¯ä¸ªæ­¥éª¤éƒ½è°ƒç”¨çœŸå®æ¨¡å‹
  - éªŒè¯è¾“å‡ºæ ¼å¼æ­£ç¡®ï¼Œç¬¦åˆ Output Parser é…ç½®
  - éªŒè¯æ¨¡å‹å“åº”è´¨é‡
  - _Requirements: 16.1, 16.3, 16.5, 16.8_

- [x] 9.3 æµ‹è¯• Pipeline è¯„ä¼°æµç¨‹ï¼ˆçœŸå®æ¨¡å‹è°ƒç”¨ï¼‰
  - åˆ›å»º `tests/test_integration_pipeline_eval.py`
  - ä½¿ç”¨ doubao-1-5-pro-32k-250115 æ¨¡å‹çœŸå®æ‰§è¡Œ Pipeline å¹¶è¯„ä¼°
  - Judge Agent å¿…é¡»ä½¿ç”¨ doubao-1-5-pro-32k-250115 æ¨¡å‹è¿›è¡ŒçœŸå®è°ƒç”¨
  - éªŒè¯è¯„ä¼°ç»“æœåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ
  - éªŒè¯ Judge è¯„åˆ†åˆç†ä¸”ç¬¦åˆæ¨¡å‹è¾“å‡ºç‰¹å¾
  - éªŒè¯ Output Parser æ­£ç¡®å¤„ç† Judge è¾“å‡º
  - _Requirements: 16.1, 16.2, 16.4, 16.8_

- [x] 9.4 æµ‹è¯•é”™è¯¯å¤„ç†ï¼ˆçœŸå®æ¨¡å‹è°ƒç”¨ï¼‰
  - æµ‹è¯•çœŸå® API è°ƒç”¨å¤±è´¥çš„å¤„ç†ï¼ˆç½‘ç»œé”™è¯¯ã€è¶…æ—¶ç­‰ï¼‰
  - æµ‹è¯• doubao-1-5-pro-32k-250115 æ¨¡å‹è¾“å‡ºè§£æå¤±è´¥çš„é™çº§å¤„ç†
  - æµ‹è¯•æ­¥éª¤å¤±è´¥çš„é”™è¯¯ä¼ æ’­
  - éªŒè¯é”™è¯¯ä¿¡æ¯æ¸…æ™°ä¸”åŒ…å«æ¨¡å‹è°ƒç”¨è¯¦æƒ…
  - æµ‹è¯•é‡è¯•æœºåˆ¶åœ¨çœŸå®æ¨¡å‹è°ƒç”¨ä¸­çš„è¡¨ç°
  - _Requirements: 16.5, 16.6, 16.8_

- [x] 10. å‘åå…¼å®¹æ€§æµ‹è¯•
  - ç¡®ä¿æ–°åŠŸèƒ½ä¸ç ´åç°æœ‰åŠŸèƒ½
  - _Requirements: 14.1, 14.2, 14.3, 14.4, 14.5_

- [x] 10.1 æµ‹è¯•æ—§ Flow é…ç½®å…¼å®¹æ€§
  - è¿è¡Œç°æœ‰çš„æ‰€æœ‰ Agent æµ‹è¯•
  - éªŒè¯æœªé…ç½® output_parser çš„ Flow è¿”å›å­—ç¬¦ä¸²
  - éªŒè¯ç°æœ‰è¯„ä¼°å‘½ä»¤ç»§ç»­å·¥ä½œ
  - _Requirements: 14.1, 14.2_

- [x] 10.2 æµ‹è¯•é…ç½®æ–‡ä»¶å…¼å®¹æ€§
  - åŠ è½½æ‰€æœ‰ç°æœ‰çš„ Agent é…ç½®
  - åŠ è½½æ‰€æœ‰ç°æœ‰çš„ Pipeline é…ç½®ï¼ˆå¦‚æœæœ‰ï¼‰
  - éªŒè¯æ‰€æœ‰é…ç½®èƒ½å¤ŸæˆåŠŸåŠ è½½
  - _Requirements: 14.3, 14.5_

- [x] 10.3 æµ‹è¯• API æ¥å£å…¼å®¹æ€§
  - æµ‹è¯•æ—§çš„ API è°ƒç”¨æ–¹å¼ç»§ç»­å·¥ä½œ
  - æµ‹è¯•æ—§çš„ CLI å‘½ä»¤ç»§ç»­å·¥ä½œ
  - éªŒè¯è¿”å›å€¼æ ¼å¼å…¼å®¹
  - _Requirements: 14.4_

- [ ] 11. æ–‡æ¡£å®Œå–„å’Œæ¶æ„æ•´ç†
  - å®Œå–„æ‰€æœ‰ç›¸å…³æ–‡æ¡£ï¼Œæ•´ç†ç³»ç»Ÿæ¶æ„å’Œ TODO
  - _Requirements: 13.1, 13.2, 13.3, 13.4, 13.5_

- [x] 11.1 æ•´ç†å’Œæ›´æ–° README.md
  - æ•´ç†æ‰€æœ‰æ–‡æ¡£é“¾æ¥ï¼Œç¡®ä¿ README æ˜¯æ–‡æ¡£å…¥å£
  - æ·»åŠ "ç³»ç»Ÿæ¶æ„"ç« èŠ‚ï¼ŒåŒ…å«æ¶æ„å›¾å’Œæ ¸å¿ƒç»„ä»¶è¯´æ˜
  - æ·»åŠ "å¼€å‘è·¯çº¿å›¾"ç« èŠ‚ï¼Œåˆ—å‡ºå·²å®Œæˆå’Œå¾…å¼€å‘åŠŸèƒ½
  - æ›´æ–°æ ¸å¿ƒæ¦‚å¿µç« èŠ‚ï¼ˆå¦‚æœéœ€è¦ï¼‰
  - æ›´æ–°å¿«é€Ÿå¼€å§‹ç« èŠ‚ï¼ˆPipeline ç¤ºä¾‹ï¼‰
  - æ›´æ–°æ¶æ„ä¸æ‰©å±•ç« èŠ‚ï¼ˆOutput Parser æ ‡è®°ä¸ºå·²å®ç°ï¼‰
  - ç¡®ä¿æ‰€æœ‰æ–‡æ¡£é“¾æ¥æœ‰æ•ˆä¸”æœ‰ç®€è¦è¯´æ˜
  - _Requirements: 13.1_

- [x] 11.2 åˆ›å»ºç³»ç»Ÿæ¶æ„æ–‡æ¡£
  - åˆ›å»º `docs/ARCHITECTURE.md` åŒ…å«å®Œæ•´çš„ç³»ç»Ÿæ¶æ„è¯´æ˜
  - åŒ…å«æ¶æ„å›¾ï¼ˆä½¿ç”¨ Mermaid æˆ– ASCIIï¼‰
  - è¯´æ˜æ ¸å¿ƒç»„ä»¶ï¼šAgent, Flow, Pipeline, Output Parser, Evaluator
  - è¯´æ˜æ•°æ®æµå’Œæ‰§è¡Œæµç¨‹
  - è¯´æ˜ä¸ LangChain çš„å…³ç³»
  - _Requirements: 13.2_

- [x] 11.3 æ›´æ–°å‚è€ƒæ–‡æ¡£
  - æ›´æ–° `docs/reference/pipeline-guide.md`ï¼ˆæ·»åŠ  Output Parser é…ç½®ï¼‰
  - åˆ›å»º `docs/reference/output-parser-guide.md`ï¼ˆè¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼‰
  - æ›´æ–° `docs/ARCHITECTURE_ANALYSIS.md`ï¼ˆæ ‡è®° Output Parser ä¸ºå·²å®ç°ï¼‰
  - ç¡®ä¿æ‰€æœ‰å‚è€ƒæ–‡æ¡£åœ¨ README ä¸­æœ‰é“¾æ¥
  - _Requirements: 13.2_

- [x] 11.4 åˆ›å»ºå¼€å‘è·¯çº¿å›¾æ–‡æ¡£
  - åœ¨ README ä¸­æ·»åŠ "å¼€å‘è·¯çº¿å›¾"ç« èŠ‚
  - åˆ—å‡ºå·²å®Œæˆçš„åŠŸèƒ½ï¼ˆâœ…ï¼‰
  - åˆ—å‡ºè¿›è¡Œä¸­çš„åŠŸèƒ½ï¼ˆğŸ”„ï¼‰
  - åˆ—å‡ºè®¡åˆ’ä¸­çš„åŠŸèƒ½ï¼ˆğŸ“‹ï¼‰
  - åŒ…å«çŸ­æœŸã€ä¸­æœŸã€é•¿æœŸè§„åˆ’
  - åŸºäº `docs/ARCHITECTURE_ANALYSIS.md` çš„ç¼ºå¤±ç»´åº¦åˆ†æ
  - _Requirements: 13.1_

- [x] 11.5 æ›´æ–° API æ–‡æ¡£
  - ä¸ºæ–°çš„ API æ·»åŠ æ–‡æ¡£å­—ç¬¦ä¸²
  - æ›´æ–°ä½¿ç”¨ç¤ºä¾‹
  - æ·»åŠ ç±»å‹æ³¨è§£
  - _Requirements: 13.3_

- [x] 11.6 æ›´æ–°æ•…éšœæ’é™¤æŒ‡å—
  - æ·»åŠ  Output Parser ç›¸å…³çš„å¸¸è§é—®é¢˜
  - æ·»åŠ  Pipeline ç›¸å…³çš„å¸¸è§é—®é¢˜
  - æ›´æ–°é”™è¯¯ä¿¡æ¯è¯´æ˜
  - _Requirements: 13.4_

- [x] 11.7 ç¡®ä¿æ–‡æ¡£ä¸€è‡´æ€§å’Œå®Œæ•´æ€§
  - æ£€æŸ¥æ‰€æœ‰æ–‡æ¡£çš„ä¸€è‡´æ€§
  - ç¡®ä¿ç¤ºä¾‹ä»£ç å¯è¿è¡Œ
  - ç¡®ä¿æ‰€æœ‰é“¾æ¥æœ‰æ•ˆ
  - éªŒè¯ README åŒ…å«æ‰€æœ‰é‡è¦æ–‡æ¡£çš„é“¾æ¥
  - éªŒè¯æ–‡æ¡£ç»“æ„æ¸…æ™°æ˜“å¯¼èˆª
  - _Requirements: 13.5_

- [-] 12. æœ€ç»ˆæ£€æŸ¥å’Œå‘å¸ƒå‡†å¤‡
  - ç¡®ä¿æ‰€æœ‰åŠŸèƒ½å®Œæ•´ä¸”æµ‹è¯•é€šè¿‡
  - _Requirements: 15.1, 15.2, 15.3, 15.4, 15.5_

- [x] 12.1 è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
  - è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
  - è¿è¡Œæ‰€æœ‰é›†æˆæµ‹è¯•
  - è¿è¡Œå‘åå…¼å®¹æ€§æµ‹è¯•
  - ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 85% ä»¥ä¸Š
  - _Requirements: 15.1, 15.2, 15.3, 15.4, 15.5_

- [ ] 12.2 æ€§èƒ½åŸºå‡†æµ‹è¯•
  - æµ‹è¯• Output Parser çš„æ€§èƒ½å½±å“
  - æµ‹è¯• Pipeline æ‰§è¡Œæ•ˆç‡
  - ä¸æ—§ç‰ˆæœ¬å¯¹æ¯”æ€§èƒ½
  - è®°å½•æ€§èƒ½åŸºå‡†

- [ ] 12.3 ä»£ç å®¡æŸ¥å’Œæ¸…ç†
  - å®¡æŸ¥æ‰€æœ‰æ–°å¢ä»£ç 
  - æ¸…ç†è°ƒè¯•ä»£ç å’Œæ³¨é‡Š
  - ç¡®ä¿ä»£ç é£æ ¼ä¸€è‡´
  - æ›´æ–°ç±»å‹æ³¨è§£

- [ ] 12.4 åˆ›å»ºå‘å¸ƒè¯´æ˜
  - åˆ—å‡ºæ–°åŠŸèƒ½
  - åˆ—å‡ºæ”¹è¿›é¡¹
  - åˆ—å‡ºç ´åæ€§å˜æ›´ï¼ˆå¦‚æœæœ‰ï¼‰
  - æä¾›è¿ç§»æŒ‡å—

- [ ] 12.5 ç”¨æˆ·éªŒæ”¶æµ‹è¯•
  - é‚€è¯·ç”¨æˆ·æµ‹è¯•æ–°åŠŸèƒ½
  - æ”¶é›†åé¦ˆ
  - ä¿®å¤å‘ç°çš„é—®é¢˜
  - æ›´æ–°æ–‡æ¡£
