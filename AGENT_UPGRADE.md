# Agent æŠ½è±¡å±‚å‡çº§å®Œæˆ

## å‡çº§æ¦‚è¿°

æˆåŠŸå°†é¡¹ç›®ä»ã€Œflow=æç¤ºè¯ç‰ˆæœ¬ã€å‡çº§ä¸ºã€Œagent=ä¸šåŠ¡è§’è‰²/ä»»åŠ¡ã€çš„æŠ½è±¡å±‚ï¼Œå®ç°äº†ä¸šåŠ¡éœ€æ±‚ã€è¯„ä¼°æ ‡å‡†ã€æµ‹è¯•é›†å’Œæç¤ºè¯ç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†ã€‚

## æ ¸å¿ƒæ”¹è¿›

### 1. æ¦‚å¿µå…³ç³»é‡æ–°å®šä¹‰

- **Agent**: ä¸€ä¸ªä¸šåŠ¡è§’è‰² + ä»»åŠ¡ï¼ˆå¦‚ `asr_cleaner`ã€`mem0_l1_summarizer`ï¼‰
- **Flow**: è¿™ä¸ª Agent çš„æŸä¸ªæç¤ºè¯ç‰ˆæœ¬/å®ç°ç‰ˆæœ¬ï¼ˆå¦‚ `asr_clean_v1`, `mem0_l1_v2`ï¼‰
- **TestSet**: ä¸ºè¿™ä¸ª Agent å‡†å¤‡çš„æµ‹è¯•é›†ï¼ˆå¦‚ `asr_clean.core.jsonl`ï¼‰

### 2. æ–°å¢ç›®å½•ç»“æ„

```
prompt-lab/
â”œâ”€â”€ agents/                    # ğŸ†• Agent é…ç½®ç›®å½•
â”‚   â”œâ”€â”€ asr_cleaner.yaml
â”‚   â””â”€â”€ mem0_l1_summarizer.yaml
â”œâ”€â”€ prompts/                   # åŸæœ‰æç¤ºè¯ç›®å½•
â”œâ”€â”€ data/                      # åŸæœ‰æ•°æ®ç›®å½•
â””â”€â”€ src/                       # æºç ç›®å½•
    â”œâ”€â”€ agent_registry.py      # ğŸ†• Agent æ³¨å†Œç®¡ç†
    â”œâ”€â”€ run_agents.py          # ğŸ†• Agent ç®¡ç†å‘½ä»¤
    â”œâ”€â”€ run_batch.py           # âœ… å‡çº§æ”¯æŒ --agent å‚æ•°
    â””â”€â”€ run_compare.py         # âœ… å‡çº§æ”¯æŒ --agent å‚æ•°
```

### 3. Agent é…ç½®æ–‡ä»¶åŠŸèƒ½

æ¯ä¸ª Agent é…ç½®æ–‡ä»¶åŒ…å«ï¼š

- **ä¸šåŠ¡ä¿¡æ¯**: `description`, `business_goal`, `expectations`
- **æµ‹è¯•é›†ç®¡ç†**: `default_testset`, `extra_testsets`
- **ç‰ˆæœ¬ç®¡ç†**: `flows` åˆ—è¡¨ï¼ŒåŒ…å«æ¯ä¸ªç‰ˆæœ¬çš„è¯´æ˜
- **è¯„ä¼°æ ‡å‡†**: `evaluation.criteria` é¢„å®šä¹‰è¯„ä¼°ç»´åº¦å’Œæƒé‡

### 4. å‘½ä»¤è¡Œå·¥å…·å‡çº§

#### æ–°å¢ Agent ç®¡ç†å‘½ä»¤
```bash
# åˆ—å‡ºæ‰€æœ‰ agents
python -m src agents list

# æŸ¥çœ‹ agent è¯¦æƒ…
python -m src agents show mem0_l1_summarizer
```

#### æ‰¹é‡è¿è¡Œæ”¯æŒ Agent
```bash
# ä½¿ç”¨ agent é»˜è®¤é…ç½®
python -m src batch --agent mem0_l1_summarizer

# æŒ‡å®šç‰¹å®š flow æˆ–æµ‹è¯•é›†
python -m src batch --agent mem0_l1_summarizer --flow mem0_l1_v2
python -m src batch --agent mem0_l1_summarizer --infile mem0_l1_test01.csv
```

#### å¯¹æ¯”æµ‹è¯•æ”¯æŒ Agent
```bash
# å¯¹æ¯” agent çš„æ‰€æœ‰ flows
python -m src compare --agent mem0_l1_summarizer

# å¯¹æ¯”æŒ‡å®šçš„ flows
python -m src compare --agent mem0_l1_summarizer --flows mem0_l1_v2,mem0_l1_v3
```

## å®é™…æµ‹è¯•ç»“æœ

### æˆåŠŸåˆ›å»ºçš„ Agents

1. **mem0_l1_summarizer** - å¯¹è¯è®°å¿†æ€»ç»“åŠ©æ‰‹
   - 3ä¸ª flows: v1, v2, v3
   - é»˜è®¤æµ‹è¯•é›†: mem0_l1.jsonl
   - è¯„ä¼°ç»´åº¦: completeness, conciseness, accuracy, structure

2. **asr_cleaner** - ASR çº é”™åŠ©æ‰‹
   - 2ä¸ª flows: v1, v2
   - é»˜è®¤æµ‹è¯•é›†: asr_clean.core.jsonl
   - è¯„ä¼°ç»´åº¦: faithfulness, clarity, style

### æµ‹è¯•éªŒè¯

âœ… Agent åˆ—è¡¨å’Œè¯¦æƒ…æŸ¥çœ‹æ­£å¸¸
âœ… ä½¿ç”¨ Agent æ‰¹é‡è¿è¡ŒæˆåŠŸï¼ˆtoken ç»Ÿè®¡æ­£å¸¸ï¼‰
âœ… ä½¿ç”¨ Agent å¯¹æ¯”æµ‹è¯•æˆåŠŸï¼ˆæ”¯æŒå…¨éƒ¨ flows å’ŒæŒ‡å®š flowsï¼‰
âœ… å‘åå…¼å®¹ï¼šåŸæœ‰çš„ç›´æ¥æŒ‡å®š flow æ–¹å¼ä»ç„¶å¯ç”¨

## å¸¦æ¥çš„ä»·å€¼

### 1. ä¸šåŠ¡å¯¼å‘çš„ç®¡ç†
- æ¯ä¸ª Agent å¯¹åº”æ˜ç¡®çš„ä¸šåŠ¡è§’è‰²å’Œä»»åŠ¡
- ä¸šåŠ¡éœ€æ±‚ã€æœŸæœ›æ ‡å‡†éƒ½æœ‰æ–‡æ¡£åŒ–è®°å½•
- é¿å…"æä¸æ¸…å“ªä¸ª flow åœ¨æœåŠ¡è°"çš„é—®é¢˜

### 2. ç»Ÿä¸€çš„é…ç½®ç®¡ç†
- ä¸šåŠ¡è¯‰æ±‚ã€è¯„ä¼°æ ‡å‡†ã€æµ‹è¯•é›†ã€æç¤ºè¯ç‰ˆæœ¬å…¨éƒ¨ç»‘å®šåœ¨ä¸€ä¸ªé…ç½®é‡Œ
- æ–°äººæ¥æ‰‹é¡¹ç›®æ—¶èƒ½å¿«é€Ÿç†è§£æ¯ä¸ª Agent çš„ä½œç”¨å’Œç°çŠ¶

### 3. æ ‡å‡†åŒ–çš„è¯„ä¼°ä½“ç³»
- é¢„å®šä¹‰è¯„ä¼°æ ‡å‡†å’Œæƒé‡ï¼Œä¾¿äºåç»­è‡ªåŠ¨åŒ–è¯„ä¼°
- ä¸º LLM Judge æ¨¡å‹æä¾›ç»Ÿä¸€çš„ rubric

### 4. ç®€åŒ–çš„ä½¿ç”¨ä½“éªŒ
- ä¸€ä¸ª `--agent` å‚æ•°å°±èƒ½è·å¾—å®Œæ•´çš„é»˜è®¤é…ç½®
- æ”¯æŒè¦†ç›–å¼é…ç½®ï¼ˆæ˜¾å¼æŒ‡å®šçš„å‚æ•°ä¼˜å…ˆçº§æ›´é«˜ï¼‰

### 5. ä¸ºæœªæ¥æ‰©å±•æ‰“åŸºç¡€
- ä¸ºçœŸæ­£çš„"å¤š Agent ç³»ç»Ÿ"æä¾›å…ƒæ•°æ®åŸºç¡€
- æ”¯æŒå°†æ¥çš„è‡ªåŠ¨åŒ–æµç¨‹å’ŒæŠ¥å‘Šç”Ÿæˆ

## ä¿æŒè½»é‡çš„è®¾è®¡åŸåˆ™

âœ… æ²¡æœ‰å¼•å…¥å¤æ‚çš„ agent framework
âœ… é…ç½®æ–‡ä»¶ç®€å•æ˜“æ‡‚ï¼Œçº¯ YAML æ ¼å¼
âœ… å‘åå…¼å®¹ï¼Œä¸ç ´åç°æœ‰å·¥ä½œæµ
âœ… æ¸è¿›å¼å‡çº§ï¼Œå¯ä»¥é€æ­¥è¿ç§»ç°æœ‰ flows åˆ° agents

è¿™æ¬¡å‡çº§æˆåŠŸå®ç°äº†ä»æŠ€æœ¯å¯¼å‘åˆ°ä¸šåŠ¡å¯¼å‘çš„è½¬å˜ï¼Œè®© Prompt Lab æ›´é€‚åˆå›¢é˜Ÿåä½œå’Œé•¿æœŸç»´æŠ¤ã€‚