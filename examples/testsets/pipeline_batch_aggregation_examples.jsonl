{"id": "batch_simple_concat", "tags": ["batch", "aggregation", "concat"], "batch_items": [{"text": "First item"}, {"text": "Second item"}, {"text": "Third item"}], "step_inputs": {"aggregate": {"strategy": "concat", "separator": " | "}}, "expected_aggregation": {"concatenated": "First item | Second item | Third item", "total_items": 3}, "expected_outputs": {"summary": "3 items processed"}}
{"id": "batch_statistical_aggregation", "tags": ["batch", "aggregation", "stats"], "batch_items": [{"score": 8.5, "category": "A"}, {"score": 7.2, "category": "B"}, {"score": 9.1, "category": "A"}, {"score": 6.8, "category": "C"}, {"score": 8.9, "category": "A"}], "step_inputs": {"aggregate": {"strategy": "stats", "fields": ["score"], "group_by": "category"}}, "expected_aggregation": {"total_items": 5, "average_score": 8.1, "max_score": 9.1, "min_score": 6.8, "by_category": {"A": {"count": 3, "avg": 8.83}, "B": {"count": 1, "avg": 7.2}, "C": {"count": 1, "avg": 6.8}}}, "expected_outputs": {"report": "Statistical analysis complete"}}
{"id": "batch_filter_aggregation", "tags": ["batch", "aggregation", "filter"], "batch_items": [{"text": "Good product", "rating": 5, "verified": true}, {"text": "Bad experience", "rating": 1, "verified": false}, {"text": "Excellent!", "rating": 5, "verified": true}, {"text": "Not recommended", "rating": 2, "verified": false}, {"text": "Amazing quality", "rating": 5, "verified": true}], "step_inputs": {"aggregate": {"strategy": "filter", "condition": "verified == true and rating >= 4"}}, "expected_aggregation": {"filtered_items": 3, "filtered_reviews": [{"text": "Good product", "rating": 5}, {"text": "Excellent!", "rating": 5}, {"text": "Amazing quality", "rating": 5}]}, "expected_outputs": {"verified_positive_count": 3}}
{"id": "batch_custom_aggregation", "tags": ["batch", "aggregation", "custom"], "batch_items": [{"product_id": "P1", "sales": 100, "returns": 5}, {"product_id": "P2", "sales": 150, "returns": 10}, {"product_id": "P3", "sales": 200, "returns": 8}], "step_inputs": {"aggregate": {"strategy": "custom", "code": "def aggregate(items):\n    total_sales = sum(item['sales'] for item in items)\n    total_returns = sum(item['returns'] for item in items)\n    return_rate = total_returns / total_sales\n    return {'total_sales': total_sales, 'total_returns': total_returns, 'return_rate': return_rate, 'best_product': max(items, key=lambda x: x['sales'] - x['returns'])['product_id']}\n"}}, "expected_aggregation": {"total_sales": 450, "total_returns": 23, "return_rate": 0.051, "best_product": "P3"}, "evaluation_config": {"tolerance": 0.001}}
{"id": "batch_multi_stage_aggregation", "tags": ["batch", "aggregation", "multi-stage"], "batch_items": [{"user_id": 1, "feedback": "Great service", "sentiment": "positive"}, {"user_id": 2, "feedback": "Poor quality", "sentiment": "negative"}, {"user_id": 1, "feedback": "Fast delivery", "sentiment": "positive"}, {"user_id": 3, "feedback": "Average", "sentiment": "neutral"}, {"user_id": 2, "feedback": "Not satisfied", "sentiment": "negative"}], "step_inputs": {"first_aggregation": {"strategy": "stats", "group_by": "user_id"}, "second_aggregation": {"strategy": "custom", "code": "def aggregate(grouped_data): return {'users_with_multiple_feedback': len([u for u in grouped_data if u['count'] > 1]), 'sentiment_summary': calculate_sentiment(grouped_data)}"}}, "expected_aggregation": {"users_with_multiple_feedback": 2, "sentiment_summary": {"positive": 2, "negative": 2, "neutral": 1}, "most_active_user": 1}, "expected_outputs": {"insights": "User engagement analysis complete"}}
{"id": "batch_with_error_handling", "tags": ["batch", "aggregation", "error-handling"], "batch_items": [{"data": "valid_1", "process": true}, {"data": "invalid", "process": false}, {"data": "valid_2", "process": true}, {"data": "error_case", "process": false}, {"data": "valid_3", "process": true}], "step_inputs": {"process_batch": {"skip_errors": true, "log_errors": true}, "aggregate": {"strategy": "stats", "include_errors": true}}, "expected_aggregation": {"total_items": 5, "successful": 3, "failed": 2, "success_rate": 0.6, "error_details": [{"item": "invalid", "reason": "invalid_data"}, {"item": "error_case", "reason": "processing_error"}]}, "evaluation_config": {"ignore_fields": ["error_details"]}}
{"id": "batch_nested_aggregation", "tags": ["batch", "aggregation", "nested"], "batch_items": [{"category": "electronics", "items": [{"name": "Phone", "price": 500}, {"name": "Laptop", "price": 1000}]}, {"category": "clothing", "items": [{"name": "Shirt", "price": 30}, {"name": "Pants", "price": 50}]}, {"category": "electronics", "items": [{"name": "Tablet", "price": 300}]}], "step_inputs": {"aggregate": {"strategy": "custom", "code": "def aggregate(items):\n    by_category = {}\n    for item in items:\n        cat = item['category']\n        if cat not in by_category:\n            by_category[cat] = {'count': 0, 'total_value': 0, 'items': []}\n        by_category[cat]['count'] += len(item['items'])\n        by_category[cat]['total_value'] += sum(i['price'] for i in item['items'])\n        by_category[cat]['items'].extend(item['items'])\n    return by_category\n"}}, "expected_aggregation": {"electronics": {"count": 3, "total_value": 1800}, "clothing": {"count": 2, "total_value": 80}}, "evaluation_config": {"strict_mode": false, "ignore_fields": ["items"]}}
